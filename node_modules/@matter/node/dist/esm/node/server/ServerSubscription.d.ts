/**
 * @license
 * Copyright 2022-2025 Matter.js Authors
 * SPDX-License-Identifier: Apache-2.0
 */
import { OnlineContext } from "#behavior/context/server/OnlineContext.js";
import type { ServerNode } from "#node/ServerNode.js";
import type { MessageExchange, NodeSession } from "#protocol";
import { InteractionServerMessenger, PeerAddress, Subscription, SubscriptionCriteria } from "#protocol";
export declare const MAX_INTERVAL_PUBLISHER_LIMIT_S: number; /** 1 hour */
export declare const INTERNAL_INTERVAL_PUBLISHER_LIMIT_S: number; /** 3 min */
export declare const MIN_INTERVAL_S = 2;
export declare const DEFAULT_RANDOMIZATION_WINDOW_S = 10;
/**
 * Server options that control subscription handling.
 */
export interface ServerSubscriptionConfig {
    /**
     * Optional maximum subscription interval to use for sending subscription reports. It will be used if not too
     * low and inside the range requested by the connected controller.
     */
    maxIntervalSeconds: number;
    /**
     * Optional minimum subscription interval to use for sending subscription reports. It will be used when other
     * calculated values are smaller than it. Use this to make sure your device hardware can handle the load and to
     * set limits.
     */
    minIntervalSeconds: number;
    /**
     * Optional subscription randomization window to use for sending subscription reports. This specifies a window
     * in seconds from which a random part is added to the calculated maximum interval to make sure that devices
     * that get powered on in parallel not all send at the same timepoint.
     */
    randomizationWindowSeconds: number;
}
export declare namespace ServerSubscriptionConfig {
    /**
     * Validate options and set defaults.
     *
     * @returns the resulting options
     */
    function of(options?: Partial<ServerSubscriptionConfig>): {
        maxIntervalSeconds: number;
        minIntervalSeconds: number;
        randomizationWindowSeconds: number;
    };
}
/**
 * Interface between {@link ServerSubscription} and the local Matter environment.
 */
export interface ServerSubscriptionContext {
    session: NodeSession;
    node: ServerNode;
    initiateExchange(address: PeerAddress, protocolId: number): MessageExchange;
}
/**
 * Implements the server side of a single subscription.
 */
export declare class ServerSubscription extends Subscription {
    #private;
    constructor(options: {
        id: number;
        context: ServerSubscriptionContext;
        criteria: SubscriptionCriteria;
        minIntervalFloorSeconds: number;
        maxIntervalCeilingSeconds: number;
        subscriptionOptions: ServerSubscriptionConfig;
        useAsMaxInterval?: number;
        useAsSendInterval?: number;
    });
    get sendInterval(): number;
    get minIntervalFloorSeconds(): number;
    get maxIntervalCeilingSeconds(): number;
    activate(): void;
    sendInitialReport(messenger: InteractionServerMessenger, readContext: OnlineContext.Options, suppressStatusReports?: boolean): Promise<void>;
    protected destroy(): Promise<void>;
    /**
     * Closes the subscription and flushes all outstanding data updates if requested.
     */
    close(graceful?: boolean, cancelledByPeer?: boolean): Promise<void>;
}
//# sourceMappingURL=ServerSubscription.d.ts.map