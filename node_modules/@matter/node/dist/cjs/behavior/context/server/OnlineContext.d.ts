/**
 * @license
 * Copyright 2022-2025 Matter.js Authors
 * SPDX-License-Identifier: Apache-2.0
 */
import { MaybePromise, Transaction } from "#general";
import type { Node } from "#node/Node.js";
import type { Message } from "#protocol";
import { FabricAccessControl, MessageExchange } from "#protocol";
import { FabricIndex, NodeId } from "#types";
import { ActionContext } from "../ActionContext.js";
import { NodeActivity } from "../NodeActivity.js";
/**
 * Operate in online context.  Public Matter API interactions happen in online context.
 */
export declare function OnlineContext(options: OnlineContext.Options): {
    /**
     * Run an actor with a read/write context.
     *
     * If the actor changes state, this may return a promise even if {@link actor} does not return a promise.
     */
    act<T>(actor: (context: ActionContext) => MaybePromise<T>): MaybePromise<T>;
    /**
     * Create an online context.
     *
     * This context operates with a {@link Transaction} created via {@link Transaction.open} and the same rules
     * apply for lifecycle management using {@link Transaction.Finalization}.
     */
    open(): ActionContext & Transaction.Finalization;
    /**
     * Begin an operation with a read-only context.
     *
     * A read-only context offers simpler lifecycle semantics than a r/w OnlineContext but you must still close the
     * context after use to properly deregister activity.
     */
    beginReadOnly(): OnlineContext.ReadOnly;
    [Symbol.toStringTag]: string;
};
export declare namespace OnlineContext {
    type Options = {
        node: Node;
        activity?: NodeActivity.Activity;
        command?: boolean;
        timed?: boolean;
        fabricFiltered?: boolean;
        message?: Message;
        aclManager?: FabricAccessControl;
    } & ({
        exchange: MessageExchange;
        fabric?: undefined;
        subject?: undefined;
    } | {
        exchange?: undefined;
        fabric: FabricIndex;
        subject: NodeId;
    });
    interface ReadOnly extends ActionContext {
        [Symbol.dispose](): void;
    }
}
//# sourceMappingURL=OnlineContext.d.ts.map